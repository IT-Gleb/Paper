import{r as w,x as ye,o as q,a as re,y as ge,z as we,A as Se,B as Te,d as E,b as c,i as f,j as o,p as U,C as pe,k as T,e as F,g as I,F as R,D as $,E as he,u as h,c as B,w as z,G as xe,H as Y,I as ve,J as Ie,s as ke,t as Ve,v as Fe}from"./index-C4j4MyPw.js";const oe=new URL("https://639e05c83542a26130555cae.mockapi.io/IdSeanses");oe.searchParams.append("sortBy","day");oe.searchParams.append("order","desc");const $e="https://639e05c83542a26130555cae.mockapi.io/IdSeanses",Q=new URL("https://639e05c83542a26130555cae.mockapi.io/Films");Q.searchParams.append("sortBy","title");Q.searchParams.append("order","asc");function j(s,n){let e=!1;return e=s.trim()!=="",e=e&&s.length>=n,e}function Ee(){let s="2024-01-15";const n=new Date;let e=n.getDate(),a=e<10?"0"+e:e,r=n.getMonth()+1,t=r<10?"0"+r:r;return s=n.getFullYear()+"-"+t+"-"+a,console.log(s),s}var ne=new WeakMap,fe=0;function Ce(s){if(!s.length)return"";for(var n="arg",e=0;e<s.length;++e){var a=void 0;s[e]===null||typeof s[e]!="object"&&typeof s[e]!="function"?typeof s[e]=="string"?a='"'+s[e]+'"':a=String(s[e]):ne.has(s[e])?a=ne.get(s[e]):(a=fe,ne.set(s[e],fe++)),n+="@"+a}return n}function Re(s){if(typeof s=="function")try{s=s()}catch{s=""}return Array.isArray(s)?s=Ce(s):s=String(s||""),s}var le=function(){function s(n){n===void 0&&(n=0),this.items=new Map,this.ttl=n}return s.prototype.serializeKey=function(n){return Re(n)},s.prototype.get=function(n){var e=this.serializeKey(n);return this.items.get(e)},s.prototype.set=function(n,e,a){var r=this.serializeKey(n),t=a||this.ttl,u=Date.now(),_={data:e,createdAt:u,expiresAt:t?u+t:1/0};this.dispatchExpire(t,_,r),this.items.set(r,_)},s.prototype.dispatchExpire=function(n,e,a){var r=this;n&&setTimeout(function(){var t=Date.now(),u=t>=e.expiresAt;u&&r.delete(a)},n)},s.prototype.delete=function(n){this.items.delete(n)},s}();function De(){return typeof navigator.onLine<"u"?navigator.onLine:!0}function Oe(){return typeof document<"u"&&typeof document.visibilityState<"u"?document.visibilityState!=="hidden":!0}var je=function(s){return fetch(s).then(function(n){return n.json()})};const ae={isOnline:De,isDocumentVisible:Oe,fetcher:je};var O=function(){return O=Object.assign||function(s){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(s[r]=n[r])}return s},O.apply(this,arguments)},L=function(s,n,e,a){function r(t){return t instanceof e?t:new e(function(u){u(t)})}return new(e||(e=Promise))(function(t,u){function _(v){try{l(a.next(v))}catch(m){u(m)}}function i(v){try{l(a.throw(v))}catch(m){u(m)}}function l(v){v.done?t(v.value):r(v.value).then(_,i)}l((a=a.apply(s,n||[])).next())})},M=function(s,n){var e={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},a,r,t,u;return u={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function _(l){return function(v){return i([l,v])}}function i(l){if(a)throw new TypeError("Generator is already executing.");for(;e;)try{if(a=1,r&&(t=l[0]&2?r.return:l[0]?r.throw||((t=r.return)&&t.call(r),0):r.next)&&!(t=t.call(r,l[1])).done)return t;switch(r=0,t&&(l=[l[0]&2,t.value]),l[0]){case 0:case 1:t=l;break;case 4:return e.label++,{value:l[1],done:!1};case 5:e.label++,r=l[1],l=[0];continue;case 7:l=e.ops.pop(),e.trys.pop();continue;default:if(t=e.trys,!(t=t.length>0&&t[t.length-1])&&(l[0]===6||l[0]===2)){e=0;continue}if(l[0]===3&&(!t||l[1]>t[0]&&l[1]<t[3])){e.label=l[1];break}if(l[0]===6&&e.label<t[1]){e.label=t[1],t=l;break}if(t&&e.label<t[2]){e.label=t[2],e.ops.push(l);break}t[2]&&e.ops.pop(),e.trys.pop();continue}l=n.call(s,e)}catch(v){l=[6,v],r=0}finally{a=t=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},Ae=function(s,n){var e=typeof Symbol=="function"&&s[Symbol.iterator];if(!e)return s;var a=e.call(s),r,t=[],u;try{for(;(n===void 0||n-- >0)&&!(r=a.next()).done;)t.push(r.value)}catch(_){u={error:_}}finally{try{r&&!r.done&&(e=a.return)&&e.call(a)}finally{if(u)throw u.error}}return t},Be=function(s,n,e){if(e||arguments.length===2)for(var a=0,r=n.length,t;a<r;a++)(t||!(a in n))&&(t||(t=Array.prototype.slice.call(n,0,a)),t[a]=n[a]);return s.concat(t||Array.prototype.slice.call(n))},_e=new le,J=new le,se=new le,be={cache:_e,refreshInterval:0,ttl:0,serverTTL:1e3,dedupingInterval:2e3,revalidateOnFocus:!0,revalidateDebounce:0,shouldRetryOnError:!0,errorRetryInterval:5e3,errorRetryCount:5,fetcher:ae.fetcher,isOnline:ae.isOnline,isDocumentVisible:ae.isDocumentVisible};function Le(s,n,e){var a=J.get(s);if(a)a.data.push(n);else{var r=5e3;J.set(s,[n],e>0?e+r:e)}}function Me(s,n,e){if(e.isDocumentVisible()&&!(e.errorRetryCount!==void 0&&n>e.errorRetryCount)){var a=Math.min(n||0,e.errorRetryCount),r=a*e.errorRetryInterval;setTimeout(function(){s(null,{errorRetryCount:a+1,shouldRetryOnError:!0})},r)}}var me=function(s,n,e,a){return e===void 0&&(e=_e),a===void 0&&(a=be.ttl),L(void 0,void 0,void 0,function(){var r,t,u,_,i,l,v;return M(this,function(m){switch(m.label){case 0:if(!Ue(n))return[3,5];m.label=1;case 1:return m.trys.push([1,3,,4]),[4,n];case 2:return r=m.sent(),[3,4];case 3:return _=m.sent(),t=_,[3,4];case 4:return[3,6];case 5:r=n,m.label=6;case 6:if(u=!1,i={data:r,error:t,isValidating:u},typeof r<"u")try{e.set(s,i,a)}catch(g){console.error("swrv(mutate): failed to set cache",g)}return l=J.get(s),l&&l.data.length&&(v=l.data.filter(function(g){return g.key===s}),v.forEach(function(g,y){typeof i.data<"u"&&(g.data=i.data),g.error=i.error,g.isValidating=i.isValidating;var S=y===v.length-1;S||delete v[y]}),v=v.filter(Boolean)),[2,i]}})})};function K(){for(var s=this,n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var a,r,t=O({},be),u=!1,_=!1,i=Te(),l=(i==null?void 0:i.proxy)||i;if(!l)return console.error("Could not get current instance, check to make sure that `useSwrv` is declared in the top level of the setup function."),null;var v=(l==null?void 0:l.$isServer)||!1;n.length>=1&&(a=n[0]),n.length>=2&&(r=n[1]),n.length>2&&(t=O(O({},t),n[2]));var m=v?t.serverTTL:t.ttl,g=typeof a=="function"?a:w(a);typeof r>"u"&&(r=t.fetcher);var y=null;y||(y=ye({data:void 0,error:void 0,isValidating:!0,key:null}));var S=function(x,p){return L(s,void 0,void 0,function(){var d,b,V,N,X,ie,Z,ue=this;return M(this,function(ee){switch(ee.label){case 0:return d=y.data===void 0,b=g.value,b?(V=t.cache.get(b),N=V&&V.data,y.isValidating=!0,N&&(y.data=N.data,y.error=N.error),X=x||r,!X||!t.isDocumentVisible()&&!d||(p==null?void 0:p.forceRevalidate)!==void 0&&!(p!=null&&p.forceRevalidate)?(y.isValidating=!1,[2]):V&&(ie=!!(Date.now()-V.createdAt>=t.dedupingInterval||p!=null&&p.forceRevalidate),!ie)?(y.isValidating=!1,[2]):(Z=function(){return L(ue,void 0,void 0,function(){var A,ce,te,de;return M(this,function(H){switch(H.label){case 0:return A=se.get(b),A?[3,2]:(ce=Array.isArray(b)?b:[b],te=X.apply(void 0,Be([],Ae(ce),!1)),se.set(b,te,t.dedupingInterval),[4,me(b,te,t.cache,m)]);case 1:return H.sent(),[3,4];case 2:return[4,me(b,A.data,t.cache,m)];case 3:H.sent(),H.label=4;case 4:return y.isValidating=!1,se.delete(b),y.error!==void 0&&(de=!u&&t.shouldRetryOnError&&(p?p.shouldRetryOnError:!0),de&&Me(S,p?p.errorRetryCount:1,t)),[2]}})})},N&&t.revalidateDebounce?(setTimeout(function(){return L(ue,void 0,void 0,function(){return M(this,function(A){switch(A.label){case 0:return u?[3,2]:[4,Z()];case 1:A.sent(),A.label=2;case 2:return[2]}})})},t.revalidateDebounce),[3,3]):[3,1])):[2];case 1:return[4,Z()];case 2:ee.sent(),ee.label=3;case 3:return[2]}})})},D=function(){return L(s,void 0,void 0,function(){return M(this,function(x){return[2,S(null,{shouldRetryOnError:!1})]})})},C=null;q(function(){var x=function(){return L(s,void 0,void 0,function(){return M(this,function(p){switch(p.label){case 0:return!y.error&&t.isOnline()?[4,S()]:[3,2];case 1:return p.sent(),[3,3];case 2:C&&clearTimeout(C),p.label=3;case 3:return t.refreshInterval&&!u&&(C=setTimeout(x,t.refreshInterval)),[2]}})})};t.refreshInterval&&(C=setTimeout(x,t.refreshInterval)),t.revalidateOnFocus&&(document.addEventListener("visibilitychange",D,!1),window.addEventListener("focus",D,!1))}),re(function(){u=!0,C&&clearTimeout(C),t.revalidateOnFocus&&(document.removeEventListener("visibilitychange",D,!1),window.removeEventListener("focus",D,!1));var x=J.get(g.value);x&&(x.data=x.data.filter(function(p){return p!==y}))});try{we(g,function(x){ge(g)||(g.value=x),y.key=x,y.isValidating=!!x,Le(g.value,y,m),!v&&!_&&g.value&&S(),_=!1},{immediate:!0})}catch{}var P=O(O({},Se(y)),{mutate:function(x,p){return S(x,O(O({},p),{forceRevalidate:!0}))}});return P}function Ue(s){return s!==null&&typeof s=="object"&&typeof s.then=="function"}async function W(s){return await(await fetch(s)).json()}const Pe=E({__name:"seansAddButton",emits:["addEvent"],setup(s,{emit:n}){const e=n,a=r=>{r.preventDefault(),e("addEvent")};return(r,t)=>(c(),f("button",{class:"border rounded-full px-2 border-col1-800 w-[24px] h-[24px] text-[9px] text-center active:bg-col1-400 active:text-col1-200",title:"Добавить/Заменить",tabindex:"-1",onClick:a}," + "))}}),Ne=E({__name:"seansClearButton",emits:["ClearEvent"],setup(s,{emit:n}){const e=n,a=r=>{r.preventDefault(),e("ClearEvent")};return(r,t)=>(c(),f("button",{class:"w-[24px] h-[24px] rounded-full border border-col1-900 text-center text-[9px] active:bg-col1-900 active:text-col1-500",title:"Очистить",tabindex:"-1",onClick:a}," x "))}}),ze={class:"w-[100%] flex justify-between gap-2 px-1"},He=["name"],Je={key:0,class:"w-fit mx-auto font-roboto text-xs text-col1-100"},Ke=o("span",{class:"font-ubuntu text-rose-600 font-semibold uppercase"},"Ошибка!!!",-1),We=E({__name:"seansInput",props:{textValue:String,nameValue:String,initText:String,textInInput:Boolean},emits:["addEvent","clearEvant"],setup(s,{emit:n}){const e=s,a=w(null),r=w(""),t=w(!1),u=()=>{var v;r.value=e.textValue,a&&((v=a.value)==null||v.focus())},_=()=>{var v;r.value="",a&&((v=a.value)==null||v.focus())},i=v=>{t.value=!1;let m=v.target.value;(m.trim()===""||m.length<5)&&(t.value=!0)},l=()=>{t.value=!1};return q(()=>{e.textInInput&&(r.value=e.initText)}),(v,m)=>(c(),f(R,null,[o("div",ze,[U(o("input",{class:"w-[90%] border text-black border-col1-500 rounded-lg focus:outline focus:outline-col1-900 px-4",type:"text",name:s.nameValue,"onUpdate:modelValue":m[0]||(m[0]=g=>r.value=g),ref_key:"inputRef",ref:a,onBlur:i,onFocus:l,placeholder:"Наименование фильма..."},null,40,He),[[pe,r.value]]),T(Pe,{onAddEvent:u}),T(Ne,{onClearEvent:_})]),t.value?(c(),f("div",Je,[Ke,F(" Проверьте правильность ввода. ")])):I("",!0)],64))}}),Ge={class:"w-[100%] mb-3 flex flex-wrap"},qe=["name","value"],Ye={class:"text-[10px] font-roboto font-semibold"},k=E({__name:"inputSeans",props:{paramTimeSeans:String,inputText:String,nameValue:String,nameSeans:String,initText:String,paramIn:Boolean},setup(s){const n=s;return(e,a)=>(c(),f("label",Ge,[o("input",{type:"hidden",name:s.nameSeans,value:s.paramTimeSeans},null,8,qe),o("span",Ye,$(s.paramTimeSeans),1),T(We,{nameValue:n.nameValue,textValue:n.inputText,initText:n.initText,textInInput:n.paramIn},null,8,["nameValue","textValue","initText","textInInput"])]))}}),Qe={class:"w-[300px] mx-auto p-2 text-center text-xs font-semibold bg-white"},Xe=["value"],G=E({__name:"progressBar",setup(s){const n=w(0),e=w(-1),a=()=>{n.value++,n.value>=100&&(n.value=0)};return q(()=>{e.value=setInterval(()=>{a()},50),re(()=>{e.value>-1&&(clearInterval(e.value),e.value=-1)})}),(r,t)=>(c(),f("div",Qe,[he(r.$slots,"default"),o("progress",{class:"w-[100%] h-[8px]",max:"100",value:n.value},$(n.value),9,Xe)]))}}),Ze=o("div",{class:"w-[100%] fixed left-0 top-0 right-0 bottom-0 bg-black opacity-75"},null,-1),et={class:"w-[70%] min-h-[35vh] mt-[10%] top-5 left-[15%] absolute bg-white p-8 z-10 flex flex-col shadow-xl shadow-black rounded-xl border-8 border-col1-700"},tt={key:0},nt={class:"w-[100%] flex-grow flex place-items-stretch justify-center border-b border-l border-r"},at={key:0,class:"w-[40%] border-r"},st=o("option",{class:"px-2 py-2 text-col1-200 bg-slate-600 uppercase sticky top-0",disabled:""},[o("span",{class:"w-fit mx-auto"},"--- Список фильмов ---")],-1),rt=["value","selected"],ot={key:1},lt={key:3,class:"w-[60%] px-4"},it={class:"text-md font-ubuntu"},ut={class:"font-ubuntu text-xl font-semibold"},ct=o("br",null,null,-1),dt=["value"],vt={class:"w-[80%] flex-shrink-0 mx-auto mt-5 p-4 place-items-center justify-evenly"},ft={class:"flex gap-4 font-ubuntu text-md"},mt={class:"flex gap-2 justify-center text-sm cursor-pointer"},pt={class:"flex gap-2 justify-center text-sm cursor-pointer"},ht={class:"w-[100%] mb-2 flex place-items-stretch justify-end gap-8 font-roboto"},xt=E({__name:"editSeansForm",props:{seansId:String},emits:["closeEditForm"],setup(s,{emit:n}){const e=n,a=s,r=w(!0),t=w(""),u=w(!1),_=w({}),i=w(void 0),l=new URL("https://639e05c83542a26130555cae.mockapi.io/IdSeanses");l.searchParams.append("id",`${a.seansId}`);const v=`https://639e05c83542a26130555cae.mockapi.io/IdSeanses/${a.seansId}`,m=x=>{x.preventDefault(),x.stopPropagation(),e("closeEditForm")},{data:g,error:y}=K(Q.toString(),W),{data:S,error:D}=K(l.toString(),W),C=x=>{x.preventDefault(),_.value={seanses:[{number:1,seans:i.value.timeSeans1.value,title:i.value.seans1.value},{number:2,seans:i.value.timeSeans2.value,title:i.value.seans2.value},{number:3,seans:i.value.timeSeans3.value,title:i.value.seans3.value},{number:4,seans:i.value.timeSeans4.value,title:i.value.seans4.value},{number:5,seans:i.value.timeSeans5.value,title:i.value.seans5.value},{number:6,seans:i.value.timeSeans6.value,title:i.value.seans6.value},{number:7,seans:i.value.timeSeans7.value,title:i.value.seans7.value}]};try{P()}finally{e("closeEditForm")}},P=async()=>{await fetch(v,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(_.value)}).then(x=>{x.ok&&x.json()}).catch(x=>console.log(x))};return(x,p)=>(c(),f(R,null,[Ze,o("div",et,[h(y)?(c(),f("p",tt,"Ошибка!!! не смог загрузить список фильмов.")):!h(y)&&!h(g)?(c(),B(G,{key:1},{default:z(()=>[F("Идет загрузка...")]),_:1})):I("",!0),o("div",nt,[h(g)?(c(),f("div",at,[U(o("select",{class:"w-[100%] font-roboto active:outline-none focus:outline-none pl-2",name:"films",size:"12","onUpdate:modelValue":p[0]||(p[0]=d=>t.value=d)},[st,(c(!0),f(R,null,Y(h(g),(d,b)=>(c(),f("option",{class:"odd:bg-rose-50 p-1 text-md text-black font-roboto",key:d.id,value:d.title,selected:b===0},$(d.title),9,rt))),128))],512),[[xe,t.value]])])):I("",!0),h(D)?(c(),f("p",ot,"Ошибка!!! Не могу получить данные...")):I("",!0),!h(D)&&!h(S)?(c(),B(G,{key:2},{default:z(()=>[F("данные сеанса...")]),_:1})):I("",!0),h(S)?(c(),f("div",lt,[o("span",it,[F("Дата сеанса: "),o("span",ut,$(h(S)[0].day),1)]),ct,o("form",{action:"#",ref_key:"editForm",ref:i},[o("input",{type:"hidden",name:"day",value:h(S)[0].day},null,8,dt),T(k,{paramTimeSeans:"09:00-10:30",inputText:t.value,nameValue:"seans1",nameSeans:"timeSeans1",initText:h(S)[0].seanses[0].title,paramIn:r.value},null,8,["inputText","initText","paramIn"]),T(k,{paramTimeSeans:"11:00-12:30",inputText:t.value,nameValue:"seans2",nameSeans:"timeSeans2",initText:h(S)[0].seanses[1].title,paramIn:r.value},null,8,["inputText","initText","paramIn"]),T(k,{paramTimeSeans:"13:00-14:30",inputText:t.value,nameValue:"seans3",nameSeans:"timeSeans3",initText:h(S)[0].seanses[2].title,paramIn:r.value},null,8,["inputText","initText","paramIn"]),T(k,{paramTimeSeans:"15:00-16:30",inputText:t.value,nameValue:"seans4",nameSeans:"timeSeans4",initText:h(S)[0].seanses[3].title,paramIn:r.value},null,8,["inputText","initText","paramIn"]),T(k,{paramTimeSeans:"17:00-18:30",inputText:t.value,nameValue:"seans5",nameSeans:"timeSeans5",initText:h(S)[0].seanses[4].title,paramIn:r.value},null,8,["inputText","initText","paramIn"]),T(k,{paramTimeSeans:"19:00-20:30",inputText:t.value,nameValue:"seans6",nameSeans:"timeSeans6",initText:h(S)[0].seanses[5].title,paramIn:r.value},null,8,["inputText","initText","paramIn"]),T(k,{paramTimeSeans:"21:00-22:30",inputText:t.value,nameValue:"seans7",nameSeans:"timeSeans7",initText:h(S)[0].seanses[6].title,paramIn:r.value},null,8,["inputText","initText","paramIn"])],512)])):I("",!0)]),o("div",vt,[o("div",ft,[F(" Сохранить: "),o("label",mt,[U(o("input",{type:"radio",id:"radio1",value:!0,"onUpdate:modelValue":p[1]||(p[1]=d=>u.value=d)},null,512),[[ve,u.value]]),F("Изменить ")]),o("label",pt,[U(o("input",{type:"radio",id:"radio1",value:!1,"onUpdate:modelValue":p[2]||(p[2]=d=>u.value=d)},null,512),[[ve,u.value]]),F("Нет ")])]),o("div",ht,[u.value?(c(),f("button",{key:0,class:"bg-rose-500 text-white px-2 py-1 text-sm border-2 border-col1-800 rounded-md active:bg-rose-100 active:text-black hover:border-yellow-500 hover:shadow-md",onClick:C}," Изменить ")):I("",!0),o("button",{class:"bg-green-200 text-black px-2 py-1 text-sm border-2 border-col1-800 rounded-md active:bg-col1-700 active:text-white hover:border-yellow-500 hover:shadow-md",onClick:m}," Закрыть ")])])])],64))}}),_t={key:1,class:"max-w-[80%] mx-auto border-b border-col1-550 mb-4"},bt={class:"w-[100%] flex place-items-start justify-between mt-2"},yt={class:"text-2xl font-bold"},gt={class:"mb-4"},wt={class:"font-ubuntu text-lg first-letter:text-xl text-col1-900"},St=E({__name:"seansItem",props:{data:Object},setup(s){const n=s,e=w(!1);return(a,r)=>{var t,u,_;return c(),f(R,null,[e.value?(c(),B(xt,{key:0,"seans-id":(t=n.data)==null?void 0:t.id,onCloseEditForm:r[0]||(r[0]=()=>{e.value=!1})},null,8,["seans-id"])):I("",!0),n?(c(),f("article",_t,[o("div",bt,[o("h1",yt,$((u=n.data)==null?void 0:u.day),1),o("button",{class:"bg-col1-200 outline outline-col1-700 px-2 py-1 rounded-sm text-col1-800 active:bg-col1-950 active:text-col1-200 hover:shadow-lg hover:outline-col1-400",onClick:r[1]||(r[1]=()=>{e.value=!0})}," Изменить ")]),o("ul",gt,[(c(!0),f(R,null,Y((_=n.data)==null?void 0:_.seanses,i=>(c(),f("li",{key:i.number,class:"odd:bg-rose-50 odd:text-col1-950"},[o("span",null,$(i.number),1),F(". "),o("span",null,$(i.seans),1),F(" - "),o("span",wt,$(i.title),1)]))),128))])])):I("",!0)],64)}}}),Tt=o("h1",{class:"text-xl first-letter:text-2xl font-roboto font-bold mb-4"}," Список сеансов в базе данных ",-1),It={key:0,class:"max-w-[95%] mx-auto max-h-[70vh] overflow-x-hidden overflow-y-auto"},kt=E({__name:"seansesList",props:{list:Object},setup(s){let n=w(!1);const e=s;return n.value=e.list!=null,(a,r)=>(c(),f(R,null,[Tt,h(n)?(c(),f("div",It,[(c(!0),f(R,null,Y(e.list,t=>(c(),f("div",{key:t.id},[T(St,{data:t},null,8,["data"])]))),128))])):I("",!0)],64))}}),Vt=s=>(ke("data-v-c9aec251"),s=s(),Ve(),s),Ft={key:0,class:"fixed left-0 top-0 right-0 bottom-0 bg-black opacity-75"},$t={key:1,class:"w-[60%] min-h-[40%] mx-auto bg-white left-[50%] absolute top-1/4 shadow-xl flex flex-col translate-x-[-50%] transform-gpu shadow-black activeWindow"},Et=Vt(()=>o("div",{class:"w-[90%]"},[o("h1",{class:"uppercase w-fit mx-auto p-2 text-yellow-400"},"Внимание")],-1)),Ct={class:"p-6 w-[100%] border-b border-col1-650 flex-grow"},Rt=E({__name:"messageForm",props:{showForm:Boolean},emits:["closeMessageForm","showMessageForm"],setup(s,{emit:n}){const e=n,a=s,r=w(a.showForm),t=u=>{u.preventDefault(),r.value=!1,e("closeMessageForm")};return Ie(()=>{r.value=a.showForm}),(u,_)=>(c(),f(R,null,[r.value?(c(),f("div",Ft)):I("",!0),r.value?(c(),f("div",$t,[o("div",{class:"w-[100%] flex place-items-stretch justify-end bg-col1-950 p-1"},[Et,o("div",null,[o("button",{class:"border-none px-3 py-1 uppercase text-white",onClick:t}," x ")])]),o("div",Ct,[he(u.$slots,"default",{},void 0,!0)]),o("div",{class:"w-[100%] mx-auto py-4 flex justify-center flex-shrink-0"},[o("button",{class:"px-4 py-2 text-sm font-ubuntu border border-col1-950 rounded-md uppercase active:bg-col1-900 active:text-col1-200 hover:shadow-lg hover:border-col1-400",onClick:t}," OK ")])])):I("",!0)],64))}}),Dt=Fe(Rt,[["__scopeId","data-v-c9aec251"]]),Ot={key:0},jt={key:2,class:"w-[100%] rounded-xl border-2 border-col1-750 mb-6 px-8 pt-8 shadow-md flex"},At={class:"w-[45%]"},Bt={class:"text-lg font-ubuntu font-bold"},Lt=o("option",{class:"px-14 py-1 font-roboto font-bold bg-slate-600 text-col1-200 uppercase sticky top-0",disabled:""}," ---Список фильмов--- ",-1),Mt=["value"],Ut={class:"w-[100%] mb-4"},Pt={class:"text-md text-col1-700 font-roboto font-bold"},Nt={class:"flex gap-10 place-items-center justify-end pt-8"},zt=E({__name:"addSeansForm",emits:["closeForm"],setup(s,{emit:n}){const e=n,a=w(void 0),r=w(void 0),t=w(Ee()),u=w(!1),_=w(""),i=w(!1),{data:l,error:v}=K(Q.toString(),W),m=w(""),g=w(!1);let y=-1;const S=async()=>{await fetch($e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r.value)}).catch(d=>console.log(d))},D=d=>{d.preventDefault(),r.value={day:a.value.dateSeans.value,seanses:[{number:1,seans:a.value.timeSeans1.value,title:a.value.seans1.value},{number:2,seans:a.value.timeSeans2.value,title:a.value.seans2.value},{number:3,seans:a.value.timeSeans3.value,title:a.value.seans3.value},{number:4,seans:a.value.timeSeans4.value,title:a.value.seans4.value},{number:5,seans:a.value.timeSeans5.value,title:a.value.seans5.value},{number:6,seans:a.value.timeSeans6.value,title:a.value.seans6.value},{number:7,seans:a.value.timeSeans7.value,title:a.value.seans7.value}]};try{C(r.value.day)}catch{console.log("Какая-то ошибка!")}},C=async d=>{try{await fetch(`https://639e05c83542a26130555cae.mockapi.io/IdSeanses/?day=${d}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then(b=>{if(b.ok)_.value=`Сеанс за  дату << ${d} >> уже существует. Измените дату. Заново введите данные!`,p();else return S(),e("closeForm"),b.json()}).catch(b=>{console.log(b,"ОШИБКА !!!")})}catch{console.log("not Found...")}},P=d=>{d.preventDefault(),e("closeForm")},x=()=>{let d=[];g.value=!1,d[0]=j(a.value.dateSeans.value,8),d[1]=j(a.value.seans1.value,5),d[2]=j(a.value.seans2.value,5),d[3]=j(a.value.seans3.value,5),d[4]=j(a.value.seans4.value,5),d[5]=j(a.value.seans5.value,5),d[6]=j(a.value.seans6.value,5),d[7]=j(a.value.seans7.value,5),d[0]&&d[1]&&d[2]&&d[3]&&d[4]&&d[5]&&d[6]&&d[7]&&(g.value=!0)},p=()=>{u.value=!0};return q(()=>{y=setInterval(()=>{x()},1200)}),re(()=>{y!==-1&&clearInterval(y)}),(d,b)=>(c(),f(R,null,[h(v)?(c(),f("p",Ot,"Ошибка получения списка фильмов!")):!h(v)&&!h(l)?(c(),B(G,{key:1},{default:z(()=>[F("Идет загрузка...")]),_:1})):!h(v)&&h(l)?(c(),f("div",jt,[o("div",At,[o("label",Bt,[U(o("select",{class:"w-[100%] focus: outline-1 focus:outline-col1-700",name:"FilmsList",size:"14","onUpdate:modelValue":b[0]||(b[0]=V=>m.value=V)},[Lt,(c(!0),f(R,null,Y(h(l),V=>(c(),f("option",{class:"px-1 odd:bg-rose-50",key:V.id,value:V.title},$(V.title),9,Mt))),128))],512),[[xe,m.value]])])]),o("form",{ref_key:"sForm",ref:a,action:"#",class:"mb-10 w-[55%] mx-auto pl-2",name:"SeansesForm"},[o("fieldset",null,[o("label",Ut,[o("p",Pt,[F(" Дата сеанса: "),U(o("input",{class:"ml-8 mb-4 px-4 py-1 border border-col1-700 rounded-lg focus:outline-col1-400 font-medium",type:"date",required:"",name:"dateSeans","onUpdate:modelValue":b[1]||(b[1]=V=>t.value=V)},null,512),[[pe,t.value]])])]),T(k,{"param-time-seans":"09:00-10:30",inputText:m.value,InitText:"",nameValue:"seans1",nameSeans:"timeSeans1",paramIn:i.value},null,8,["inputText","paramIn"]),T(k,{"param-time-seans":"11:00-12:30",inputText:m.value,InitText:"",nameValue:"seans2",nameSeans:"timeSeans2",paramIn:i.value},null,8,["inputText","paramIn"]),T(k,{"param-time-seans":"14:00-15:30",inputText:m.value,InitText:"",nameValue:"seans3",nameSeans:"timeSeans3",paramIn:i.value},null,8,["inputText","paramIn"]),T(k,{"param-time-seans":"16:00-17:30",inputText:m.value,nameValue:"seans4",nameSeans:"timeSeans4",paramInitText:"",paramIn:i.value},null,8,["inputText","paramIn"]),T(k,{"param-time-seans":"18:00-19:30",inputText:m.value,nameValue:"seans5",nameSeans:"timeSeans5",InitText:"",paramIn:i.value},null,8,["inputText","paramIn"]),T(k,{"param-time-seans":"20:00-21:30",inputText:m.value,nameValue:"seans6",nameSeans:"timeSeans6",paramInitText:"",paramIn:i.value},null,8,["inputText","paramIn"]),T(k,{"param-time-seans":"22:00-23:30",inputText:m.value,nameValue:"seans7",nameSeans:"timeSeans7",InitText:"",paramIn:i.value},null,8,["inputText","paramIn"])]),o("div",Nt,[g.value?(c(),f("button",{key:0,class:"border rounded-md bg-green-700 text-col1-600 border-col1-550 px-6 py-1 active:bg-green-200 active:text-col1-500 hover:shadow-lg font-roboto text-sm",onClick:D}," Добавить(+) ")):I("",!0),o("button",{class:"border rounded-md bg-rose-400 text-col1-600 border-col1-550 px-6 py-1 active:bg-rose-100 active:text-col1-500 hover:shadow-lg font-roboto text-sm",onClick:P}," Отменить ")])],512)])):I("",!0),T(Dt,{showForm:u.value,onShowMessageForm:p,onCloseMessageForm:b[2]||(b[2]=()=>{u.value=!1})},{default:z(()=>[F($(_.value),1)]),_:1},8,["showForm"])],64))}}),Ht={class:"w-[80%] mx-auto"},Jt={class:"w-[100%] flex place-items-stretch justify-between px-20 my-6"},Kt=o("h1",{class:"text-[30px] leading-7 text-col1-950 mb-7"},"Сеансы:",-1),Wt=["title"],Gt={key:1,class:"text-red-600 text-2xl text-center w-fit mx-auto"},Yt=E({__name:"seanses",setup(s){const n=w(!1),{data:e,error:a}=K(oe.toString(),W,{revalidateOnFocus:!0,refreshInterval:5e3}),r=()=>{n.value=!n.value};return(t,u)=>(c(),f("section",Ht,[o("div",Jt,[Kt,o("div",null,[o("button",{class:"rounded-full bg-col1-400 w-10 h-10 text-white text-center text-[24px] pb-4",onClick:r,title:n.value?"Закрыть":"Открыть"},$(n.value?"-":"+"),9,Wt)])]),n.value?(c(),B(zt,{key:0,onCloseForm:r})):I("",!0),h(a)?(c(),f("p",Gt," Какая-то ошибка!!! ")):I("",!0),!h(e)&&!h(a)?(c(),B(G,{key:2},{default:z(()=>[F("Загрузка...")]),_:1})):h(e)?(c(),B(kt,{key:3,list:h(e)},null,8,["list"])):I("",!0)]))}});export{Yt as default};
